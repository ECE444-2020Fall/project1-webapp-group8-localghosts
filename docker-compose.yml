version: "3.8"

services:
  app:
    image: local/apprentice/app:latest
    build: ./apprentice
    restart: on-failure
    ports:
      - "5000:5000"
    environment: 
      - "ELASTICSEARCH_URL=http://recipes:9200/"
      - "WAIT_HOSTS=recipes:9200"
  recipes:
    image: local/apprentice/recipe-db:latest
    build: ./recipe-db
    restart: on-failure
    ports:
      - "9200:9200"
      - "9300:9300"